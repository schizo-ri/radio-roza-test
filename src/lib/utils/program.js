const program = [
  {
    title: 'Kamenolom Light',
    day: 'Monday',
    show_start: '13:00',
  },
  {
    title: 'Naše gore riff ',
    day: 'Monday',
    show_start: '16:00',
  },
  {
    title: 'Fjaka',
    day: 'Tuesday',
    show_start: '08:00',
  },
  {
    title: 'Fjaka',
    day: 'Tuesday',
    show_start: '15:00',
  },
  {
    title: 'Kuplung',
    day: 'Wednesday',
    show_start: '00:00',
  },
  {
    title: 'Space is the place',
    day: 'Wednesday',
    show_start: '02:00',
  },
  {
    title: 'Chill Pill',
    day: 'Wednesday',
    show_start: '04:00',
  },
  {
    title: 'Don Eladio',
    day: 'Wednesday',
    show_start: '08:00',
  },
  {
    title: 'Ras Pashoy - Reggae/Dub',
    day: 'Wednesday',
    show_start: '16:00',
  },
  {
    title: 'Ritmologija',
    day: 'Wednesday',
    show_start: '20:00',
  },
  {
    title: 'Naše Gore Riff - Electro',
    day: 'Wednesday',
    show_start: '23:00',
  },
  {
    title: 'Chill Pill',
    day: 'Thursday',
    show_start: '04:00',
  },
  {
    title: 'Izvorišta',
    day: 'Friday',
    show_start: '14:00',
  },
  {
    title: 'Potrensuljka',
    day: 'Saturday',
    show_start: '00:00',
  },
  {
    title: 'Funkushima',
    day: 'Saturday',
    show_start: '14:00',
  },
  {
    title: 'Kamenolom - Dark',
    day: 'Saturday',
    show_start: '20:00',
  },
  {
    title: 'Strujni Vod - Techno',
    day: 'Sunday',
    show_start: '00:00',
  },
  {
    title: 'Chill Pill',
    day: 'Sunday',
    show_start: '04:00',
  },
  {
    title: 'Don Eladio',
    day: 'Sunday',
    show_start: '10:00',
  },
  {
    title: 'Ritmologija',
    day: 'Sunday',
    show_start: '12:00',
  },
  {
    title: 'Depilacija',
    day: 'Sunday',
    show_start: '20:00',
  },
  {
    title: 'Naše Gore Riff - Indie',
    day: 'Friday',
    show_start: '15:00',
  },
  {
    title: 'Chill Pill',
    day: 'Monday',
    show_start: '00:00',
  },
  {
    title: 'Chill Pill',
    day: 'Monday',
    show_start: '00:00',
  },
  {
    title: 'Space is the place',
    day: 'Monday',
    show_start: '04:00',
  },
  {
    title: 'Chill Pill',
    day: 'Tuesday',
    show_start: '00:00',
  },
  {
    title: 'Space is the Place',
    day: 'Tuesday',
    show_start: '04:00',
  },
  {
    title: 'Space is the Place',
    day: 'Friday',
    show_start: '04:00',
  },
  {
    title: 'Roža info',
    day: 'Thursday',
    show_start: '12:00',
  },
  {
    title: 'Yugofonija',
    day: 'Sunday',
    show_start: '18:00',
  },
  {
    title: 'Ritmologija',
    day: 'Tuesday',
    show_start: '20:00',
  },
  {
    title: 'Ja Biram',
    day: 'Tuesday',
    show_start: '23:00',
  },
  {
    title: 'Ritmologija',
    day: 'Friday',
    show_start: '18:00',
  },
  {
    title: 'Naše gore riff - Rock',
    day: 'Thursday',
    show_start: '23:00',
  },
  {
    title: 'Dramorama',
    day: 'Thursday',
    show_start: '17:00',
  },
  {
    title: 'Kamenolom Dark',
    day: 'Thursday',
    show_start: '18:00',
  },
  {
    title: 'Okolo naokolo - Afro',
    day: 'Wednesday',
    show_start: '13:00',
  },
  {
    title: 'Okolo Naokolo - Istok',
    day: 'Thursday',
    show_start: '15:00',
  },
  {
    title: 'Fjaka',
    day: 'Thursday',
    show_start: '13:00',
  },
  {
    title: 'Funkushima',
    day: 'Friday',
    show_start: '13:00',
  },
  {
    title: 'Kava sa šlagerom',
    day: 'Friday',
    show_start: '08:00',
  },
  {
    title: 'Kapuz',
    day: 'Friday',
    show_start: '10:00',
  },
  {
    title: 'Kamenolom Light',
    day: 'Tuesday',
    show_start: '13:00',
  },
  {
    title: 'Ras Pashoy - Dubstep',
    day: 'Friday',
    show_start: '22:00',
  },
  {
    title: 'Okolo Naokolo - Afro',
    day: 'Sunday',
    show_start: '16:20',
  },
  {
    title: 'Space is the Place',
    day: 'Saturday',
    show_start: '06:00',
  },
  {
    title: 'Strujni Vod - Minimal House',
    day: 'Friday',
    show_start: '00:00',
  },
  {
    title: 'Strujni vod - Electro Breakbeat',
    day: 'Thursday',
    show_start: '00:00',
  },
  {
    title: 'Kuplung',
    day: 'Monday',
    show_start: '22:00',
  },
  {
    title: 'Mutant Disco ',
    day: 'Monday',
    show_start: '21:00',
  },
  {
    title: 'Kava sa šlagerom',
    day: 'Thursday',
    show_start: '08:00',
  },
  {
    title: 'Bubanj i Bass',
    day: 'Sunday',
    show_start: '21:00',
  },
  {
    title: 'Kuplung',
    day: 'Sunday',
    show_start: '23:00',
  },
  {
    title: 'Kapuz',
    day: 'Thursday',
    show_start: '10:00',
  },
  {
    title: 'Funkushima',
    day: 'Monday',
    show_start: '17:00',
  },
  {
    title: 'Ritmologija',
    day: 'Monday',
    show_start: '20:30',
  },
  {
    title: 'HEX.',
    day: 'Monday',
    show_start: '19:30',
  },
  {
    title: 'Kava sa šlagerom',
    day: 'Monday',
    show_start: '08:00',
  },
  {
    title: 'Funkushima',
    day: 'Wednesday',
    show_start: '10:00',
  },
  {
    title: 'Fjaka',
    day: 'Friday',
    show_start: '11:00',
  },
  {
    title: 'Okolo Naokolo - Afro',
    day: 'Tuesday',
    show_start: '17:00',
  },
  {
    title: 'Ja Biram',
    day: 'Saturday',
    show_start: '23:00',
  },
  {
    title: 'Naše gore riff - Indie',
    day: 'Saturday',
    show_start: '16:00',
  },
  {
    title: 'Don Eladio',
    day: 'Tuesday',
    show_start: '11:00',
  },
  {
    title: 'Fjaka',
    day: 'Saturday',
    show_start: '08:00',
  },
  {
    title: 'Fader',
    day: 'Friday',
    show_start: '20:00',
  },
  {
    title: 'Štošta',
    day: 'Saturday',
    show_start: '19:00',
  },
  {
    title: 'Reality Check',
    day: 'Wednesday',
    show_start: '21:00',
  },
  {
    title: 'Naše Gore Riff -Ri Rock',
    day: 'Saturday',
    show_start: '21:00',
  },
  {
    title: 'Podzemna kulisa - Peperton specijal',
    day: 'Tuesday',
    show_start: '21:00',
  },
  {
    title: 'Naftalina',
    day: 'Monday',
    show_start: '10:00',
  },
  {
    title: 'Kava sa šlagerom',
    day: 'Monday',
    show_start: '11:00',
  },
];

const blocks = {
  Fjaka: 'Kad ti je život previše stresan, a krevet predaleko - sjedni i slušaj.',
  Kapuz: 'Glazba za one dane kad ni kava ne pomaže. Hoodie up, world out.',
  'Kava sa šlagerom':
    'Šlager hits koji idu uz jutarnju kavu - slatko, pjenjavo, možda malo lipkavo.',
  'Kamenolom Light':
    'Rock koji neće razbiti prozore, ali će razbuditi susjede. Odgovorno teškaštvo.',
  'Kamenolom Dark': 'Kad Light nije dovoljno - full metal jacket za uši. Nosači slušalica, oprez!',
  'Kamenolom - Dark':
    'Kad Light nije dovoljno - full metal jacket za uši. Nosači slušalica, oprez!',
  'Naše Gore Riff -Ri Rock': 'Domaći rock koji lupa jače od rakije. Balkanski riffovi bez granica.',
  'Naše Gore Riff - Indie':
    'Indie zvukovi s naših prostora - alternativa alternativama, hipsterski approved.',
  'Naše Gore Riff - Electro':
    'Kad rakija sretne sintetizator - električni Balkan za moderne nomade.',
  'Naše gore riff ': 'Domaći riffovi koji lupe pravo u srce - balkanski zvukovi bez granica.',
  'Naše gore riff - Rock': 'Domaći rock koji lupa jače od rakije. Balkanski riffovi bez granica.',
  'Naše gore riff - Indie':
    'Indie zvukovi s naših prostora - alternativa alternativama, hipsterski approved.',
  'Don Eladio': 'Elegantno opasna glazba - kao dobar mezcal, glatko ide, ali ima punch.',
  'Okolo naokolo - Afro': 'Afrički ritmovi koji te tjeraju da plešeš, čak i kad misliš da ne znaš.',
  'Okolo Naokolo - Afro': 'Afrički ritmovi koji te tjeraju da plešeš, čak i kad misliš da ne znaš.',
  'Okolo Naokolo - Istok': 'Putovanje na Istok bez vize - od Balkana do Bliskog istoka zvukom.',
  Funkushima: 'Radioaktivno funkaran - groove koji se ne zaustavlja, možda i zarazno.',
  Ritmologija: 'Znanstveno dokazano: ritam liječi. Doktor preporučuje bass i hi-hat.',
  Kuplung: 'Glazba koja povezuje - kao dobar kuplung, sve ide glatko u pravom rhythm-u.',
  'Chill Pill': 'Audio sedativ za preživljavanje modernog života. Nuspojave: smirenost.',
  'Strujni vod - Electro Breakbeat': 'Visokonaponski breakbeats - pazi, udara pod 220V groovea!',
  'Strujni Vod - Techno':
    'Tehno koji prolazi kroz žile kao električna struja - underground pure energy.',
  'Strujni Vod - Minimal House': 'Manje je više, ali bass je dovoljno. Minimalistički hedonizam.',
  Potrensuljka: 'Glazba koja te trese kao dobar trening - cardio za uši, workout za dušu.',
  'Space is the place': 'Cosmic sounds za zemaljske bića - Houston, imamo funky problem!',
  'Space is the Place': 'Cosmic sounds za zemaljske bića - Houston, imamo funky problem!',
  'Ras Pashoy - Reggae/Dub': 'One love, heavy bass - Jah blagoslovio ovaj soundsystem.',
  'Ras Pashoy - Dubstep': 'Kad dub sretne 2010-e - reggae roots sa sub-bass terapijom.',
  Izvorišta: 'Povratak korijenima - tradicijski zvukovi koji te vezuju za zemlju i predke.',
  Depilacija: 'Glazba koja skida dlake i inhibicije - raw energy bez cenzure.',
  'Roža info': 'Sve što trebaš znati, a nisi znao da trebaš - informacije začinjene muzikom.',
  Yugofonija: 'Nostalgija na vinilu - kad je Balkan bio jedan, a glazba bila zajedničku.',
  'Ja Biram': 'Demokratija na radiju - ti biraš, mi puštamo, svi uživamo.',
  Dramorama: 'Teatar za uši - kad riječi postaju glazba, a glazba postaje priča.',
  'Mutant Disco ': 'Disco koji je mutirao u nešto bolje - evolucija plesa kroz zvuk.',
  'Bubanj i Bass': 'Dva najbolja prijatelja zvuka - jednostavno i nezaustavljivo.',
  'HEX.': 'Šesterokutni zvukovi za digitalne duše - algoritmi koji groovaju.',
  Naftalina: 'Vintage vibes iz babine škrinje - staro zlato koje nikad ne izlazi iz mode.',
  Fader: 'Kad DJ postane dirigent, a mikseta postane orkestar - pure mixing magic.',
  Štošta: 'Kad ne znaš što očekivati, ali znaš da će biti dobro - audio rulet.',
  'Reality Check': 'Provjera stvarnosti kroz bass i melodiju - wake up call za uši.',
  'Podzemna kulisa - Peperton specijal':
    'Underground scena kroz piperov objektiv - kultura ispod radara.',
};

const sortedByDay = program.sort((a, b) => a.day.localeCompare(b.day));

// get program on a weekday
function getProgramOnWeekday(day) {
  return program.filter((show) => show.day === day);
}

function getCurrentShow() {
  const now = new Date();
  const currentDay = now.toLocaleDateString('en-US', { weekday: 'long' });
  const currentTime = now.getHours() * 60 + now.getMinutes(); // Convert to minutes for easier comparison

  const todayProgram = getProgramOnWeekday(currentDay);
  if (!todayProgram?.length) {
    return null;
  }

  // Convert show times to minutes and filter shows that have already started
  const startedShows = todayProgram
    .map((show) => ({
      ...show,
      startTimeMinutes:
        parseInt(show.show_start.split(':')[0]) * 60 + parseInt(show.show_start.split(':')[1]),
    }))
    .filter((show) => show.startTimeMinutes <= currentTime)
    .sort((a, b) => b.startTimeMinutes - a.startTimeMinutes); // Sort by start time, most recent first

  return startedShows[0] || null;
}

function getNextShow() {
  const now = new Date();
  const currentDay = now.toLocaleDateString('en-US', { weekday: 'long' });
  const currentTime = now.getHours() * 60 + now.getMinutes();

  const daysOfWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
  const currentDayIndex = daysOfWeek.indexOf(currentDay);

  // First, check for shows later today
  const todayProgram = getProgramOnWeekday(currentDay);
  const todayUpcoming = todayProgram
    .map((show) => ({
      ...show,
      startTimeMinutes:
        parseInt(show.show_start.split(':')[0]) * 60 + parseInt(show.show_start.split(':')[1]),
    }))
    .filter((show) => show.startTimeMinutes > currentTime)
    .sort((a, b) => a.startTimeMinutes - b.startTimeMinutes);

  if (todayUpcoming.length > 0) {
    return todayUpcoming[0];
  }

  // If no shows today, find the next show in upcoming days
  for (let i = 1; i <= 7; i++) {
    const nextDayIndex = (currentDayIndex + i) % 7;
    const nextDay = daysOfWeek[nextDayIndex];
    const nextDayProgram = getProgramOnWeekday(nextDay);

    if (nextDayProgram.length > 0) {
      // Sort by time and return the earliest show of that day
      const sortedShows = nextDayProgram
        .map((show) => ({
          ...show,
          startTimeMinutes:
            parseInt(show.show_start.split(':')[0]) * 60 + parseInt(show.show_start.split(':')[1]),
        }))
        .sort((a, b) => a.startTimeMinutes - b.startTimeMinutes);

      return sortedShows[0];
    }
  }

  return null;
}

export { program, blocks, sortedByDay, getProgramOnWeekday, getCurrentShow, getNextShow };
